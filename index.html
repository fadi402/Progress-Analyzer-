<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>School Progress Analyzer</title>

<style>
body{
  margin:0;
  font-family:Segoe UI, Arial, sans-serif;
  background:#f1f5f9;
}
header{
  background:#0f172a;
  color:white;
  padding:16px;
  text-align:center;
}
section{
  display:none;
  padding:20px;
}
section.active{display:block}
.card{
  background:white;
  padding:20px;
  border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,.08);
  margin-bottom:20px;
}
h2{margin-top:0;color:#0f172a}
input,select,button{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  font-size:15px;
}
button{
  background:#2563eb;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
button:hover{background:#1d4ed8}
.bottom-nav{
  position:fixed;
  bottom:0;
  width:100%;
  background:#020617;
  display:flex;
}
.bottom-nav button{
  flex:1;
  background:none;
  color:white;
  border:none;
  padding:14px;
  font-size:14px;
}
.bottom-nav button.active{
  background:#1e293b;
}
.student{
  border-bottom:1px solid #e5e7eb;
  padding:8px 0;
}
canvas{
  border:1px solid #e5e7eb;
  background:#fff;
  margin-top:10px;
}
.good{color:green}
.bad{color:red}
</style>
</head>

<body>

<header>
<h1>School Academic System</h1>
<p>Professional Student Progress Analyzer</p>
</header>

<!-- ADMISSION -->
<section id="admission" class="active">
<div class="card">
<h2>School Admission</h2>
<input id="adName" placeholder="Student Name">
<select id="adGender">
  <option>Boys</option>
  <option>Girls</option>
</select>
<select id="adClass">
  <option>Class 6</option>
  <option>Class 7</option>
  <option>Class 8</option>
</select>
<button onclick="addAdmission()">Confirm Admission</button>
</div>
<div class="card">
<h2>Admitted Students</h2>
<div id="adList"></div>
</div>
</section>

<!-- ADD STUDENT FOR PROGRESS -->
<section id="progressAdd">
<div class="card">
<h2>Add Student for Progress Tracking</h2>
<input id="pName" placeholder="Student Name">
<button onclick="addProgressStudent()">Add Student</button>
</div>

<div class="card">
<h2>Add Monthly Marks</h2>
<select id="pSelect"></select>
<select id="pMonth">
  <option>January</option>
  <option>February</option>
  <option>March</option>
</select>
<input id="pMarks" type="number" placeholder="Marks (out of 100)">
<button onclick="saveMarks()">Save Marks</button>
</div>
</section>

<!-- GRAPH -->
<section id="graphs">
<div class="card">
<h2>Progress Graph & Analysis</h2>
<select id="gSelect" onchange="drawGraph()"></select>
<p id="analysis"></p>
<canvas id="chart" width="320" height="180"></canvas>
</div>
</section>

<!-- NAV -->
<div class="bottom-nav">
<button class="active" onclick="openTab('admission',this)">Admission</button>
<button onclick="openTab('progressAdd',this)">Add Student</button>
<button onclick="openTab('graphs',this)">Graphs</button>
</div>

<script>
let admissions=[];
let students=[];

function openTab(id,btn){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll(".bottom-nav button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

function addAdmission(){
  if(!adName.value) return alert("Enter name");
  admissions.push({
    name:adName.value,
    gender:adGender.value,
    class:adClass.value
  });
  adName.value="";
  renderAdmissions();
}

function renderAdmissions(){
  adList.innerHTML="";
  admissions.forEach(s=>{
    adList.innerHTML+=`<div class="student">${s.name} (${s.gender}, ${s.class})</div>`;
  });
}

function addProgressStudent(){
  if(!pName.value) return alert("Enter name");
  students.push({name:pName.value,marks:{}});
  pName.value="";
  updateSelects();
}

function updateSelects(){
  pSelect.innerHTML="";
  gSelect.innerHTML="";
  students.forEach((s,i)=>{
    let o=document.createElement("option");
    o.value=i;o.text=s.name;
    pSelect.add(o);
    gSelect.add(o.cloneNode(true));
  });
}

function saveMarks(){
  let s=students[pSelect.value];
  let m=pMonth.value;
  s.marks[m]=Number(pMarks.value);
  pMarks.value="";
}

function drawGraph(){
  let s=students[gSelect.value];
  let ctx=chart.getContext("2d");
  ctx.clearRect(0,0,chart.width,chart.height);
  let months=Object.keys(s.marks);
  if(months.length<2){
    analysis.innerText="Add at least two months to analyze progress.";
    return;
  }
  ctx.beginPath();
  ctx.moveTo(20,160);
  months.forEach((m,i)=>{
    let x=20+i*100;
    let y=160-s.marks[m];
    ctx.lineTo(x,y);
    ctx.fillText(m[0],x-5,175);
  });
  ctx.strokeStyle="#2563eb";
  ctx.stroke();

  let diff=s.marks[months.at(-1)]-s.marks[months.at(-2)];
  let perc=Math.round(s.marks[months.at(-1)]);
  analysis.innerHTML=
    `Percentage: <b>${perc}%</b> |
     <span class="${diff>=0?'good':'bad'}">
     ${diff>=0?'Improved':'Declined'}
     </span>`;
}
</script>

</body>
</html>
