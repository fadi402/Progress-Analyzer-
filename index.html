<!DOCTYPE html>
<html lang="en">
<h
  bodyMat
);
abdomen.position.z = -0.6;

const thorax = new THREE.Mesh(
  new THREE.SphereGeometry(0.8, 32, 32),
  bodyMat
);

spider.add(abdomen, thorax);

/* Legs */
const legs = [];
for (let i = 0; i < 8; i++) {
  const leg = new THREE.Mesh(
    new THREE.CylinderGeometry(0.05, 0.08, 3, 12),
    bodyMat
  );
  leg.rotation.z = Math.PI / 2;
  leg.position.x = (i < 4 ? -1.2 : 1.2);
  leg.position.z = (i % 4 - 1.5) * 0.6;
  spider.add(leg);
  legs.push(leg);
}

/* Animation */
let t = 0;
let dir = 1;

function animate() {
  requestAnimationFrame(animate);
  t += 0.05;

  spider.position.x += 0.03 * dir;
  spider.position.y = Math.sin(t * 2) * 0.1;

  if (spider.position.x > 8 || spider.position.x < -8) dir *= -1;

  legs.forEach((leg, i) => {
    leg.rotation.y = Math.sin(t * 3 + i) * 0.6;
  });

  renderer.render(scene, camera);
}
animate();

/* Resize */
window.addEventListener("resize", () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
